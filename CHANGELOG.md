## Changelog

### v0.11.0

- gateway: simplify mux configuration (@sgotti)                                        [#551](https://github.com/agola-io/agola/pull/551)
- *: update dependencies (@sgotti)                                                     [#550](https://github.com/agola-io/agola/pull/550)
- *: update to go 1.25 (@sgotti)                                                       [#549](https://github.com/agola-io/agola/pull/549)
- Update to golangci-lint v2.4.0 (@sgotti)                                             [#548](https://github.com/agola-io/agola/pull/548)
- *: update gorilla CSRF version (@sgotti)                                             [#547](https://github.com/agola-io/agola/pull/547)
- config: validate allowed origins (@sgotti)                                           [#546](https://github.com/agola-io/agola/pull/546)
- *: update gotests.tool to latest version (@sgotti)                                   [#545](https://github.com/agola-io/agola/pull/545)
- *: update to go 1.24 (@sgotti)                                                       [#544](https://github.com/agola-io/agola/pull/544)
- Update to golangci-lint v2.1.6 (@sgotti)                                             [#543](https://github.com/agola-io/agola/pull/543)
- examples: add missing web config for notification service (@sgotti)                  [#542](https://github.com/agola-io/agola/pull/542)
- *: update dependencies (@sgotti)                                                     [#539](https://github.com/agola-io/agola/pull/539)
- *: use log Msg when passing a string. (@sgotti)                                      [#538](https://github.com/agola-io/agola/pull/538)
- errors: add WithAPIErrorMsgf (@sgotti)                                               [#537](https://github.com/agola-io/agola/pull/537)
- *: update to go 1.23 (@sgotti)                                                       [#535](https://github.com/agola-io/agola/pull/535)
- errors: add WithWrapperErrorMsgf (@sgotti)                                           [#536](https://github.com/agola-io/agola/pull/536)
- *: explicitly create services local directories (@sgotti)                            [#534](https://github.com/agola-io/agola/pull/534)
- services/config: check valid sqlite3 db connstring (@sgotti)                         [#533](https://github.com/agola-io/agola/pull/533)
- services/config: fix db config validation (@sgotti)                                  [#532](https://github.com/agola-io/agola/pull/532)
- gateway: add detailed errors to get project response (@alessandro-sorint)            [#530](https://github.com/agola-io/agola/pull/530)

### v0.10.0

- gateway: unify/improve handling of authenticated user (@sgotti)                      [#525](https://github.com/agola-io/agola/pull/525)
- gateway: move remaining get of current user from api to action (@sgotti)             [#524](https://github.com/agola-io/agola/pull/524)
- gateway: fix commit status and run webhook deliveries api (@alessandro-sorint)       [#521](https://github.com/agola-io/agola/pull/521)
- tests: fix wrong ProjectCommitStatusRedelivery test (@alessandro-sorint)             [#522](https://github.com/agola-io/agola/pull/522)
- cmd/export: close file descriptor (@testwill)                                        [#516](https://github.com/agola-io/agola/pull/516)
- objectstorage: multiple updates and changes (@sgotti)                                [#519](https://github.com/agola-io/agola/pull/519)
- runservice: fix objectsCleaner lock key usage (@sgotti)                              [#520](https://github.com/agola-io/agola/pull/520)
- util: use generic Ptr function (@sgotti)                                             [#518](https://github.com/agola-io/agola/pull/518)
- *: update dependencies (@sgotti)                                                     [#517](https://github.com/agola-io/agola/pull/517)
- api: add some missing http content types headers. (@sgotti)                          [#514](https://github.com/agola-io/agola/pull/514)
- config: add docker registries auth nil check (@alessandro-sorint)                    [#513](https://github.com/agola-io/agola/pull/513)
- configstore: move logic from db to action handler (@sgotti)                          [#511](https://github.com/agola-io/agola/pull/511)
- *: update dependencies (@sgotti)                                                     [#512](https://github.com/agola-io/agola/pull/512)
- *: add detailed errors to api responses (@sgotti)                                    [#507](https://github.com/agola-io/agola/pull/507)
- *: use do method in http handlers (@sgotti)                                          [#508](https://github.com/agola-io/agola/pull/508)
- gateway: add action.APIErrorFromRemoteError (@sgotti)                                [#506](https://github.com/agola-io/agola/pull/506)
- errors: split wrapped error from APIError message (@sgotti)                          [#505](https://github.com/agola-io/agola/pull/505)
- configstore: move last bits of logic from api to action (@sgotti)                    [#504](https://github.com/agola-io/agola/pull/504)
- configstore: fix wrong error handling (@sgotti)                                      [#503](https://github.com/agola-io/agola/pull/503)
- validation: add min/max length check to name validation (@sgotti)                    [#499](https://github.com/agola-io/agola/pull/499)
- *: update to go 1.22 (@sgotti)                                                       [#498](https://github.com/agola-io/agola/pull/498)
- sqlg updates (@sgotti)                                                               [#495](https://github.com/agola-io/agola/pull/495)

### v0.9.0

- agolademo: use docker compose (@sgotti)                                                                      [#494](https://github.com/agola-io/agola/pull/494)
- executor: add option to define docker driver network (@sgotti)                                               [#493](https://github.com/agola-io/agola/pull/493)
- Dockerfile: agolademo: create agola directories (@sgotti)                                                    [#491](https://github.com/agola-io/agola/pull/491)
- Dockerfile: update final image (@sgotti)                                                                     [#489](https://github.com/agola-io/agola/pull/489)
- notification: fix cleaners infinite loop. (@sgotti)                                                          [#487](https://github.com/agola-io/agola/pull/487)
- *: add cursor fetching to GetRuns api (@sgotti)                                                              [#484](https://github.com/agola-io/agola/pull/484)
- tests: always check testutil.Wait error (@sgotti)                                                            [#485](https://github.com/agola-io/agola/pull/485)
- tests: improve and simplify some tests (@sgotti)                                                             [#483](https://github.com/agola-io/agola/pull/483)
- tests: split tests in multiple files. (@sgotti)                                                              [#482](https://github.com/agola-io/agola/pull/482)
- *: actions: ensure a default sort direction (@sgotti)                                                        [#480](https://github.com/agola-io/agola/pull/480)
- *: commitstatus/runwebook delivery save filter inside cursor (@sgotti)                                       [#481](https://github.com/agola-io/agola/pull/481)
- configstore: simplify/improve Get tests (@sgotti)                                                            [#478](https://github.com/agola-io/agola/pull/478)
- notification: simplify/improve Get tests (@sgotti)                                                           [#479](https://github.com/agola-io/agola/pull/479)
- tests: simplify Get API with cursor tests (@sgotti)                                                          [#477](https://github.com/agola-io/agola/pull/477)
- runservice: add AGOLA_RUN_COUNTER variable (@alessandro-sorint)                                              [#473](https://github.com/agola-io/agola/pull/473)
- gateway: add api to redeliver a commit status delivery (@alessandro-sorint)                                  [#472](https://github.com/agola-io/agola/pull/472)
- gateway: fix api cursors (@alessandro-sorint)                                                                [#471](https://github.com/agola-io/agola/pull/471)
- notification: fix db func GetProjectRunWebhookDeliveriesAfterSequenceByProjectID (@alessandro-sorint)        [#470](https://github.com/agola-io/agola/pull/470)
- notification: fix db func GetProjectCommitStatusDeliveriesAfterSequenceByProjectID (@alessandro-sorint)      [#468](https://github.com/agola-io/agola/pull/468)
- tests: use assert helpers (@sgotti)                                                                          [#469](https://github.com/agola-io/agola/pull/469)
- testutil: Add NilError helper to log detailed test errors (@sgotti)                                          [#466](https://github.com/agola-io/agola/pull/466)
- testutil: add detailed errors for zerolog output in tests (@sgotti)                                          [#465](https://github.com/agola-io/agola/pull/465)
- notification: rename GetProjectRunWebhookDeliveriesAfterSequence func (@alessandro-sorint)                   [#467](https://github.com/agola-io/agola/pull/467)
- gateway: add api to get commit status deliveries (@alessandro-sorint)                                        [#460](https://github.com/agola-io/agola/pull/460)
- runservice: remove time.sleep from tests (@sgotti)                                                           [#464](https://github.com/agola-io/agola/pull/464)
- configstore: remove time.sleep from tests (@sgotti)                                                          [#462](https://github.com/agola-io/agola/pull/462)
- notification: remove time.sleep from tests (@sgotti)                                                         [#461](https://github.com/agola-io/agola/pull/461)
- notification: delete old commit statuses (@alessandro-sorint)                                                [#459](https://github.com/agola-io/agola/pull/459)
- notification: delete old run webhooks (@alessandro-sorint)                                                   [#457](https://github.com/agola-io/agola/pull/457)
- gateway: add api to redelivery a run webhook delivery (@alessandro-sorint)                                   [#456](https://github.com/agola-io/agola/pull/456)
- gateway: add api to get run webhook deliveries (@alessandro-sorint)                                          [#452](https://github.com/agola-io/agola/pull/452)
- configstore: fix test get remotesources continuation (@alessandro-sorint)                                    [#455](https://github.com/agola-io/agola/pull/455)
- db: defer sqlite foreign keys during migration (@sgotti)                                                     [#454](https://github.com/agola-io/agola/pull/454)
- runservice: return right error on not existing run (@alessandro-sorint)                                      [#451](https://github.com/agola-io/agola/pull/451)
- *: update dependencies (@sgotti)                                                                             [#449](https://github.com/agola-io/agola/pull/449)
- configstore: add ability to org members to restart stop cancel a project run (@alessandro-sorint)            [#446](https://github.com/agola-io/agola/pull/446)
- *: update to go 1.21 (@sgotti)                                                                               [#448](https://github.com/agola-io/agola/pull/448)
- *: add cursor fetching to GetOrgs api (@sgotti)                                                              [#444](https://github.com/agola-io/agola/pull/444)
- testutils/db: handle col type bool on export (@sgotti)                                                       [#447](https://github.com/agola-io/agola/pull/447)
- testutils/db: use schema provided by migrate data during export (@alessandro-sorint)                         [#445](https://github.com/agola-io/agola/pull/445)
- notification: store commit status and commit status delivery (@alessandro-sorint)                            [#432](https://github.com/agola-io/agola/pull/432)
- gateway: cleanup org invitation code. (@sgotti)                                                              [#443](https://github.com/agola-io/agola/pull/443)
- gateway: correctly handle org/pg visibility (@sgotti)                                                        [#442](https://github.com/agola-io/agola/pull/442)
- *: add cursor fetching to GetRemoteSources api (@sgotti)                                                     [#440](https://github.com/agola-io/agola/pull/440)
- testutils/db: use sequences provided by create data during import (@alessandro-sorint)                       [#441](https://github.com/agola-io/agola/pull/441)
- *: add cursor fetching to GetUserOrgs api (@sgotti)                                                          [#439](https://github.com/agola-io/agola/pull/439)
- *: add cursor fetching to GetUsers api (@sgotti)                                                             [#437](https://github.com/agola-io/agola/pull/437)
- ci: increase postgres container max connections (@sgotti)                                                    [#438](https://github.com/agola-io/agola/pull/438)
- *: cursor based list api. (@sgotti)                                                                          [#436](https://github.com/agola-io/agola/pull/436)
- cmd: rename gateway client variable. (@sgotti)                                                               [#435](https://github.com/agola-io/agola/pull/435)
- tests: use const for remote error string output (@sgotti)                                                    [#433](https://github.com/agola-io/agola/pull/433)
- ci: use fixed postgres image version (@sgotti)                                                               [#434](https://github.com/agola-io/agola/pull/434)
- tests: add missing t.Parallel to TestRunEventsNotification (@sgotti)                                         [#431](https://github.com/agola-io/agola/pull/431)
- configstore: clean TestOrgInvitation tests (@sgotti)                                                         [#429](https://github.com/agola-io/agola/pull/429)
- notification: store last run event sequence (@alessandro-sorint)                                             [#423](https://github.com/agola-io/agola/pull/423)
- notification tests: synchronously start webhooksreceiver (@sgotti)                                           [#426](https://github.com/agola-io/agola/pull/426)
- notification: make webhooksreceiver a test file. (@sgotti)                                                   [#425](https://github.com/agola-io/agola/pull/425)
- notification: store webhook and webhook delivery (@alessandro-sorint)                                        [#413](https://github.com/agola-io/agola/pull/413)
- testutils/db: handle byte array (@sgotti)                                                                    [#420](https://github.com/agola-io/agola/pull/420)
- sqlg: add support for blob/byte array base type (@sgotti)                                                    [#419](https://github.com/agola-io/agola/pull/419)
- *: Optional internal services authentication (@sgotti)                                                       [#412](https://github.com/agola-io/agola/pull/412)
- services: use common SetupDB function (@sgotti)                                                              [#414](https://github.com/agola-io/agola/pull/414)
- config: add global urls fields (@sgotti)                                                                     [#411](https://github.com/agola-io/agola/pull/411)
- config: avoid updating the default config (@sgotti)                                                          [#410](https://github.com/agola-io/agola/pull/410)
- add ability to send webhooks to external tools (@alessandro-sorint)                                          [#367](https://github.com/agola-io/agola/pull/367)
- examples: add cookieSigning config (@sgotti)                                                                 [#408](https://github.com/agola-io/agola/pull/408)
- *: update db generators and tests (@sgotti)                                                                  [#407](https://github.com/agola-io/agola/pull/407)

### v0.8.0

#### Important Upgrade Notes

Agola v0.8.0 moved its internal db based on etcd and objectstorage to a standard external sql database (PostgreSQL or sqlite for single node deployments).

If you are going to update from a version <= v0.7.x you should do some manual steps to migrate the runservice and configstore data.

These steps are provided in the [migration documentation](https://github.com/agola-io/agola/blob/bd109b9e230949dec860ba8b040e1fc460ba372d/doc/migrating_from_v0.7.x.md)

#### Changes from v0.7.0

- gateway: fix GetUserGitSource action (@alessandro-sorint)                                   [#404](https://github.com/agola-io/agola/pull/404)
- gitsources: split oauth2Client from gitsource (@sgotti)                                     [#403](https://github.com/agola-io/agola/pull/403)
- runservice/db: fix get run query (@alessandro-sorint)                                       [#402](https://github.com/agola-io/agola/pull/402)
- migrateexport: defer sqlite foreign keys (@sgotti)                                          [#400](https://github.com/agola-io/agola/pull/400)
- configstore: add some db constraints (@sgotti)                                              [#399](https://github.com/agola-io/agola/pull/399)
- *: new db schema (@sgotti)                                                                  [#398](https://github.com/agola-io/agola/pull/398)
- executor: fix k8s test (@sgotti)                                                            [#397](https://github.com/agola-io/agola/pull/397)
- cmd: fix run list task api call (@sgotti)                                                   [#364](https://github.com/agola-io/agola/pull/364)
- runservice: use dedicated api types for executor communication (@sgotti)                    [#396](https://github.com/agola-io/agola/pull/396)
- *: use github.com/sorintlab/errors (@sgotti)                                                [#395](https://github.com/agola-io/agola/pull/395)
- *: organize imports and add gci linter (@sgotti)                                            [#394](https://github.com/agola-io/agola/pull/394)
- executor: close cache archive file before sending (@sgotti)                                 [#390](https://github.com/agola-io/agola/pull/390)
- github: update github ssh key (@sgotti)                                                     [#392](https://github.com/agola-io/agola/pull/392)
- configstore: fix remote source ssh_host_key update (@sgotti)                                [#391](https://github.com/agola-io/agola/pull/391)
- gateway: skip csrf check only on successful token auth (@sgotti)                            [#389](https://github.com/agola-io/agola/pull/389)
- gateway: use auth cookies instead of jwt tokens (@sgotti)                                   [#365](https://github.com/agola-io/agola/pull/365)
- *: Fix auth flow with password based remote source (@sgotti)                                [#388](https://github.com/agola-io/agola/pull/388)
- *: improve some error handling/logging (@sgotti)                                            [#387](https://github.com/agola-io/agola/pull/387)
- ci: update images (@sgotti)                                                                 [#386](https://github.com/agola-io/agola/pull/386)
- *: update dependencies (@sgotti)                                                            [#385](https://github.com/agola-io/agola/pull/385)
- tests: parallelize tests (@sgotti)                                                          [#384](https://github.com/agola-io/agola/pull/384)
- util: add wrapper error helper type (@sgotti)                                               [#375](https://github.com/agola-io/agola/pull/375)
- *: enable stylecheck and fix related lint warnings. (@sgotti)                               [#383](https://github.com/agola-io/agola/pull/383)
- *: update to go 1.20 (@sgotti)                                                              [#376](https://github.com/agola-io/agola/pull/376)
- *: remove deprecated use of io/ioutil package (@sgotti)                                     [#377](https://github.com/agola-io/agola/pull/377)
- tests: fix failing gitea pull request creation (@sgotti)                                    [#374](https://github.com/agola-io/agola/pull/374)
- tests: cleanups (@sgotti)                                                                   [#373](https://github.com/agola-io/agola/pull/373)
- configstore: fix GetOrgInvitations db action (@alessandro-sorint)                           [#368](https://github.com/agola-io/agola/pull/368)
- util: fix empty APIError error message printing (@sgotti)                                   [#370](https://github.com/agola-io/agola/pull/370)
- integration tests: fix TestMaintenance (@alessandro-sorint)                                 [#369](https://github.com/agola-io/agola/pull/369)
- add cmd import, export, maintenance for runservice and configstore (@alessandro-sorint)     [#340](https://github.com/agola-io/agola/pull/340)
- gateway/client: add GetOrgs (@alessandro-sorint)                                            [#366](https://github.com/agola-io/agola/pull/366)
- tests: remove repeated strings (@alessandro-sorint)                                         [#361](https://github.com/agola-io/agola/pull/361)
- gateway: add admin api to get remote source user (@alessandro-sorint)                       [#353](https://github.com/agola-io/agola/pull/353)
- db: improve transactions handling (@sgotti)                                                 [#363](https://github.com/agola-io/agola/pull/363)
- *: implement org member adding modes: direct or invitation (@alessandro-sorint)             [#285](https://github.com/agola-io/agola/pull/285)
- tests: improve tests setup (@sgotti)                                                        [#359](https://github.com/agola-io/agola/pull/359)
- configstore: use GetOrg method in DeleteOrg (@alessandro-sorint)                            [#356](https://github.com/agola-io/agola/pull/356)
- configstore: fix deleteUser query (@alessandro-sorint)                                      [#354](https://github.com/agola-io/agola/pull/354)
- *: add api to update organization (@alessandro-sorint)                                      [#349](https://github.com/agola-io/agola/pull/349)
- configstore: fix action AddOrgMember (@alessandro-sorint)                                   [#352](https://github.com/agola-io/agola/pull/352)
- Handle remote repo default branch (@alessandro-sorint)                                      [#303](https://github.com/agola-io/agola/pull/303)
- gateway: add GetUserGitSource action to get user gitsource (@alessandro-sorint)             [#348](https://github.com/agola-io/agola/pull/348)
- runservice: add tasks timeout (@alessandro-sorint)                                          [#331](https://github.com/agola-io/agola/pull/331)
- runservice: added logcleanerLoop for deleting older logs (@alessandro-sorint)               [#294](https://github.com/agola-io/agola/pull/294)
- *: fix updating of user linked account (@sgotti)                                            [#346](https://github.com/agola-io/agola/pull/346)
- executor: use a timeout for pod creation (@alessandro-sorint)                               [#343](https://github.com/agola-io/agola/pull/343)
- executor: avoid locking during setupTask (@alessandro-sorint)                               [#344](https://github.com/agola-io/agola/pull/344)
- update to go 1.18 (@alessandro-sorint)                                                      [#336](https://github.com/agola-io/agola/pull/336)
- services config: correctly use yaml tags instead of json tags (@sgotti)                     [#341](https://github.com/agola-io/agola/pull/341)
- types: add custom Duration type (@alessandro-sorint)                                        [#342](https://github.com/agola-io/agola/pull/342)
- executor: fix synchronization when pod is starting (@alessandro-sorint)                     [#293](https://github.com/agola-io/agola/pull/293)
- gateway: return task containers image names in RunTaskResponse (@tulliobotti64)             [#338](https://github.com/agola-io/agola/pull/338)
- *: replace etcd and datamanager with a sql db (@sgotti)                                     [#328](https://github.com/agola-io/agola/pull/328)

### v0.7.0

- runconfig: temporary enable ssh client ssh-rsa sha1 signature algorithm (@sgotti)                     [#333](https://github.com/agola-io/agola/pull/333)
- configstore: update api and action request types (@sgotti)                                            [#329](https://github.com/agola-io/agola/pull/329)
- *: change gateway runs api (@sgotti)                                                                  [#323](https://github.com/agola-io/agola/pull/323)
- *: replace os errors check functions with errors.Is (@sgotti)                                         [#325](https://github.com/agola-io/agola/pull/325)
- config: add ability to take the docker registry encoded auth from a variable (@alessandro-sorint)     [#296](https://github.com/agola-io/agola/pull/296)
- runconfig: fix missing generation of dockerregistryauth auth field (@alessandro-sorint)               [#298](https://github.com/agola-io/agola/pull/298)
- test: use `T.TempDir` to create temporary test directory (@Juneezee)                                  [#324](https://github.com/agola-io/agola/pull/324)
- cmd: fix run list panic on task with nil exit status (@sgotti)                                        [#314](https://github.com/agola-io/agola/pull/314)
- tests: don't start gitea for direct runs test (@sgotti)                                               [#312](https://github.com/agola-io/agola/pull/312)
- *: use new errors handling library (@sgotti)                                                          [#321](https://github.com/agola-io/agola/pull/321)
- *: use zerolog for logging (@sgotti)                                                                  [#320](https://github.com/agola-io/agola/pull/320)
- *: Improve error handling (@sgotti)                                                                   [#313](https://github.com/agola-io/agola/pull/313)
- *: use errors.Is/errors.As to handle wrapped error checking (@sgotti)                                 [#319](https://github.com/agola-io/agola/pull/319)
- ci: update golangci-lint to v1.44.2 (@sgotti)                                                         [#315](https://github.com/agola-io/agola/pull/315)
- gateway: use dedicated auth context keys type (@sgotti)                                               [#317](https://github.com/agola-io/agola/pull/317)
- gateway: add api to get authenticated user organizations (@tulliosorintdev)                           [#299](https://github.com/agola-io/agola/pull/299)
- go.mod: replace <https://github.com/satori/go.uuid> (@sgotti)                                         [#311](https://github.com/agola-io/agola/pull/311)
- ci: update gitea to v1.15.11 (@alessandro-sorint)                                                     [#305](https://github.com/agola-io/agola/pull/305)
- gitserver: add cleanup of old repos/branches (@alessandro-sorint)                                     [#284](https://github.com/agola-io/agola/pull/284)
- runconfig: test task generation with on_skipped dependencies (@alessandro-sorint)                     [#302](https://github.com/agola-io/agola/pull/302)
- runconfig: add case statement for on_skipped (@raeyulca)                                              [#290](https://github.com/agola-io/agola/pull/290)
- config: fix executor ActiveTasksLimit yaml tag (@alessandro-sorint)                                   [#279](https://github.com/agola-io/agola/pull/279)
- *: migrate to golang-jwt/jwt (@sgotti)                                                                [#276](https://github.com/agola-io/agola/pull/276)
- fix: gitea fetch remote repository with pagination (@ygbillet)                                        [#273](https://github.com/agola-io/agola/pull/273)
- executor: add init image config authentication options (@sgotti)                                      [#271](https://github.com/agola-io/agola/pull/271)
- executor: use busybox:stable as default init image (@sgotti)                                          [#270](https://github.com/agola-io/agola/pull/270)
- executor/docker: pull init image only when needed (@sgotti)                                           [#269](https://github.com/agola-io/agola/pull/269)
- executor: add config option to define the init image (@sgotti)                                        [#268](https://github.com/agola-io/agola/pull/268)

### v0.6.0

- *: update to go 1.16 (@sgotti)                                                             [#257](https://github.com/agola-io/agola/pull/257)
- gitserver: fix fetchfile error handling (@sgotti)                                          [#258](https://github.com/agola-io/agola/pull/258)
- Remove WaitingApproval for stopped tasks (@camandel)                                       [#253](https://github.com/agola-io/agola/pull/253)
- example: fix gitserverURL in example config (@sgotti)                                      [#250](https://github.com/agola-io/agola/pull/250)
- add content-type header for /config.js (@ftsell)                                           [#249](https://github.com/agola-io/agola/pull/249)
- vendor: update gitea sdk v0.11.0 -> 0.12.0 (@6543)                                         [#241](https://github.com/agola-io/agola/pull/241)
- *: update to go 1.14 (@sgotti)                                                             [#217](https://github.com/agola-io/agola/pull/217)
- config: check max config size (@sgotti)                                                    [#239](https://github.com/agola-io/agola/pull/239)
- config: add starlark config support (@sgotti)                                              [#232](https://github.com/agola-io/agola/pull/232)
- run: export also ref type environment variable to runs (@sgotti)                           [#231](https://github.com/agola-io/agola/pull/231)
- run: export also pull request id environment variable to runs (@sgotti)                    [#230](https://github.com/agola-io/agola/pull/230)
- config: provide jsonnet context top level argument (@sgotti)                               [#141](https://github.com/agola-io/agola/pull/141)
- runconfig: disable password authentication in clone step (@sgotti)                         [#229](https://github.com/agola-io/agola/pull/229)
- runservice: correctly handle skipped tasks in fetcher (@sgotti)                            [#226](https://github.com/agola-io/agola/pull/226)
- github: add issue templates config (@sgotti)                                               [#227](https://github.com/agola-io/agola/pull/227)
- runservice: fix handling of wrong executortask status (@sgotti)                            [#225](https://github.com/agola-io/agola/pull/225)
- executor: use cancellable context in executetask (@sgotti)                                 [#224](https://github.com/agola-io/agola/pull/224)
- executor: fix stopping of not running tasks (@sgotti)                                      [#223](https://github.com/agola-io/agola/pull/223)
- runservice: use all scheduled tasks in scheduleRun (@sgotti)                               [#220](https://github.com/agola-io/agola/pull/220)
- executor: fix reporting of stopped tasks and steps (@sgotti)                               [#222](https://github.com/agola-io/agola/pull/222)
- executor: serialize task handling (@sgotti)                                                [#221](https://github.com/agola-io/agola/pull/221)
- runservice: minimize scheduling of tasks that will be queued by the executor (@sgotti)     [#218](https://github.com/agola-io/agola/pull/218)
- runservice: mark not running tasks as skipped when run marked to stop (@sgotti)            [#219](https://github.com/agola-io/agola/pull/219)
- gateway: move authentication apis to /api/v1alpha/auth (@sgotti)                           [#215](https://github.com/agola-io/agola/pull/215)
- go.mod: update dependencies (@sgotti)                                                      [#213](https://github.com/agola-io/agola/pull/213)

### v0.5.0

- gitsources: handle skipverify also in oauth2 requests (@sgotti)                            [#208](https://github.com/agola-io/agola/pull/208)
- github: handle nil user email (@sgotti)                                                    [#207](https://github.com/agola-io/agola/pull/207)
- cmd: remotesource create don't force github defaults (@sgotti)                             [#205](https://github.com/agola-io/agola/pull/205)
- github: use the provided api url (@sgotti)                                                 [#206](https://github.com/agola-io/agola/pull/206)
- vendor: update gitea sdk (@6543)                                                           [#203](https://github.com/agola-io/agola/pull/203)
- makefile: remove test target (@sgotti)                                                     [#202](https://github.com/agola-io/agola/pull/202)
- cmd: project option to disable passing variables to PR from forked repo (@camandel)        [#198](https://github.com/agola-io/agola/pull/198)
- doc: document supported go versions. (@sgotti)                                             [#201](https://github.com/agola-io/agola/pull/201)
- Update github.com/opencontainers/runc (@MitaliBo)                                          [#195](https://github.com/agola-io/agola/pull/195)
- cmd: fix token create help message (@camandel)                                             [#196](https://github.com/agola-io/agola/pull/196)
- tests: add unique name for logs of the third ConfigStore instance (@camandel)              [#197](https://github.com/agola-io/agola/pull/197)
- tests: improve services logging (@sgotti)                                                  [#194](https://github.com/agola-io/agola/pull/194)
- docker: create a toolbox volume for every pod (@sgotti)                                    [#193](https://github.com/agola-io/agola/pull/193)
- datamanager tests: don't wait for etcd down (@sgotti)                                      [#189](https://github.com/agola-io/agola/pull/189)
- cmd: add TaskID to run list output (@camandel)                                             [#188](https://github.com/agola-io/agola/pull/188)
- cmd: add details to run list (@camandel)                                                   [#185](https://github.com/agola-io/agola/pull/185)
- cmd: add log get and delete subcommands (@camandel)                                        [#187](https://github.com/agola-io/agola/pull/187)
- gateway: fix api used by GetRunTask (@camandel)                                            [#186](https://github.com/agola-io/agola/pull/186)
- cmd: fix project visibility switch (@camandel)                                             [#184](https://github.com/agola-io/agola/pull/184)

### v0.4.0

- gateway/runservice: add api to delete step logs                                            [#157](https://github.com/agola-io/agola/pull/157)
- *: write and flush header on log handlers (@sgotti)                                        [#180](https://github.com/agola-io/agola/pull/180)
- runservice: improve errors in logsHandler (@sgotti)                                        [#179](https://github.com/agola-io/agola/pull/179)
- runservice: use etcd mutex TryLock on fetching (@sgotti)                                   [#177](https://github.com/agola-io/agola/pull/177)
- gateway: add api to get log status (@camandel)                                             [#175](https://github.com/agola-io/agola/pull/175)
- *: use etcd mutex TryLock (@sgotti)                                                        [#176](https://github.com/agola-io/agola/pull/176)
- datamanager: skip already applied wals in writeDataSnapshot (@sgotti)                      [#167](https://github.com/agola-io/agola/pull/167)
- readdb: improve HandleEvents goroutine exiting (@sgotti)                                   [#172](https://github.com/agola-io/agola/pull/172)
- datamanager tests: increase etcd waitdown timeout (@sgotti)                                [#174](https://github.com/agola-io/agola/pull/174)
- *: improve error handling (@sgotti)                                                        [#169](https://github.com/agola-io/agola/pull/169)
- objectstorage: use a single package (@sgotti)                                              [#170](https://github.com/agola-io/agola/pull/170)
- datamanager: refactor ReadWal (@sgotti)                                                    [#168](https://github.com/agola-io/agola/pull/168)
- datamanager: check wal previouswalsequence is correct in initEtcd (@sgotti)                [#165](https://github.com/agola-io/agola/pull/165)
- datamanager: don't create ost wal checkpointed files (@sgotti)                             [#164](https://github.com/agola-io/agola/pull/164)
- datamanager: clean old data files (@sgotti)                                                [#160](https://github.com/agola-io/agola/pull/160)
- datamanager: fix index creation on multiple data files (@sgotti)                           [#163](https://github.com/agola-io/agola/pull/163)
- services: check config only for enabled services (@camandel)                               [#162](https://github.com/agola-io/agola/pull/162)
- datamanager: add data sequence to data file name (@sgotti)                                 [#158](https://github.com/agola-io/agola/pull/158)
- sequence: add tests for String and Parse methods (@sgotti)                                 [#159](https://github.com/agola-io/agola/pull/159)
- go.mod: update dependencies (@sgotti)                                                      [#150](https://github.com/agola-io/agola/pull/150)
- run config: add tty option for run steps (@camandel)                                       [#149](https://github.com/agola-io/agola/pull/149)
- README: issue link points to templates (@camandel)                                         [#156](https://github.com/agola-io/agola/pull/156)
- objectstorage: add WriteObject tests (@sgotti)                                             [#155](https://github.com/agola-io/agola/pull/155)
- objectstorage: return object size in objectinfo (@sgotti)                                  [#154](https://github.com/agola-io/agola/pull/154)
- objectstorage posix: use limitreader only when size is specified. (@sgotti)                [#153](https://github.com/agola-io/agola/pull/153)
- objectstorage s3: use limitreader in write object (@sgotti)                                [#152](https://github.com/agola-io/agola/pull/152)

### v0.3.0

- gitea: use GetRepoRefs instead of GetRepoRef (@sgotti)                                     [#146](https://github.com/agola-io/agola/pull/146)
- when: fix typo in tag matching (@sgotti)                                                   [#147](https://github.com/agola-io/agola/pull/147)
- cmd: add run create command (@sgotti)                                                      [#144](https://github.com/agola-io/agola/pull/144)
- gateway: fix project create run http method (@sgotti)                                      [#143](https://github.com/agola-io/agola/pull/143)
- docker: mount multiple volumes (@camandel)                                                 [#142](https://github.com/agola-io/agola/pull/142)
- gitsources: don't set branch value when in a pull request (@sgotti)                        [#140](https://github.com/agola-io/agola/pull/140)
- when: match only the current ref type (@sgotti)                                            [#139](https://github.com/agola-io/agola/pull/139)
- \*: implement ability to add tmpfs volumes to containers (@sgotti)                         [#136](https://github.com/agola-io/agola/pull/136)
- cmd: add version command (@camandel)                                                       [#135](https://github.com/agola-io/agola/pull/135)
- datamanager: remove some logs from tests (@sgotti)                                         [#134](https://github.com/agola-io/agola/pull/134)
- cmd: add completion command (@camandel)                                                    [#133](https://github.com/agola-io/agola/pull/133)
- cmd: add project group delete command (@sgotti)                                            [#132](https://github.com/agola-io/agola/pull/132)
- cmd: add project group update command (@sgotti)                                            [#131](https://github.com/agola-io/agola/pull/131)
- gateway: add parentRef field to project group update api (@sgotti)                         [#130](https://github.com/agola-io/agola/pull/130)
- configstore: implement project group move (@sgotti)                                        [#128](https://github.com/agola-io/agola/pull/128)
- configstore: disable root project group deletion (@sgotti)                                 [#129](https://github.com/agola-io/agola/pull/129)
- cmd: add project update command (@sgotti)                                                  [#123](https://github.com/agola-io/agola/pull/123)
- tests: wait gitea ready (@sgotti)                                                          [#127](https://github.com/agola-io/agola/pull/127)
- gateway: add parentRef field to project update api (@sgotti)                               [#122](https://github.com/agola-io/agola/pull/122)
- cmd: fix version output (@camandel)                                                        [#126](https://github.com/agola-io/agola/pull/126)
- Add github issue templates (@sgotti)                                                       [#125](https://github.com/agola-io/agola/pull/125)
- configstore: implement project move (@sgotti)                                              [#121](https://github.com/agola-io/agola/pull/121)
- cmd: fix typos in online help (@camandel)                                                  [#124](https://github.com/agola-io/agola/pull/124)
- cli: add secret/variable list subcommand (@camandel)                                       [#118](https://github.com/agola-io/agola/pull/118)
- config: add clone options (@camandel)                                                      [#120](https://github.com/agola-io/agola/pull/120)
- gateway: api implement get secrets removeoverridden (@sgotti)                              [#119](https://github.com/agola-io/agola/pull/119)
- skip run with special commit (@camandel)                                                   [#90](https://github.com/agola-io/agola/pull/90)
- executor: add missing mutex unlock (@sgotti)                                               [#117](https://github.com/agola-io/agola/pull/117)
- gateway: run api return more step data (@sgotti)                                           [#116](https://github.com/agola-io/agola/pull/116)
- runservice: save step exitstatus in run. (@sgotti)                                         [#115](https://github.com/agola-io/agola/pull/115)
- runservice: don't save executor task data in etcd (@sgotti)                                [#113](https://github.com/agola-io/agola/pull/113)
- runservice: add run workspace cleaner (@sgotti)                                            [#109](https://github.com/agola-io/agola/pull/109)
- executor: set the container exec user in every step (@sgotti)                              [#112](https://github.com/agola-io/agola/pull/112)
- runconfig: set task default shell (@sgotti)                                                [#111](https://github.com/agola-io/agola/pull/111)
- runservice: remove run step user (@sgotti)                                                 [#110](https://github.com/agola-io/agola/pull/110)
- \*: update to go 1.13 (@sgotti)                                                            [#105](https://github.com/agola-io/agola/pull/105)
- gitserver: don't return http response/error when calling external git process (@sgotti)    [#103](https://github.com/agola-io/agola/pull/103)
- util: Fix PathList output when path ends with slashes (@sgotti)                            [#102](https://github.com/agola-io/agola/pull/102)

### v0.2.0

- agola run: update to agola-web v0.2.0 (@sgotti)                                            [#100](https://github.com/agola-io/agola/pull/100)
- types: use a global When type (@sgotti)                                                    [#99](https://github.com/agola-io/agola/pull/99)
- agola run: update to agola-web v0.1.2 (@sgotti)                                            [#95](https://github.com/agola-io/agola/pull/95)
- README.md: update screenshots (@sgotti)                                                    [#96](https://github.com/agola-io/agola/pull/96)
- agola run: build images and push them when on a v.\* tag (@sgotti)                         [#94](https://github.com/agola-io/agola/pull/94)
- runservice: fix get tasks to run (@sgotti)                                                 [#93](https://github.com/agola-io/agola/pull/93)
- tests: add wait function in place of sleep (@sgotti)                                       [#92](https://github.com/agola-io/agola/pull/92)
- cmd: fix variable create/update (@sgotti)                                                  [#91](https://github.com/agola-io/agola/pull/91)
- update example in devel doc (@camandel)                                                    [#89](https://github.com/agola-io/agola/pull/89)
- config: fix check on task and parents with common deps (@sgotti)                           [#88](https://github.com/agola-io/agola/pull/88)
- userdirectrun: add options to define variables (@sgotti)                                   [#86](https://github.com/agola-io/agola/pull/86)
- Dockerfile: update to debian buster (@sgotti)                                              [#85](https://github.com/agola-io/agola/pull/85)
- executor: listen on wildcard address (@sgotti)                                             [#84](https://github.com/agola-io/agola/pull/84)
- config: add run when field (@sgotti)                                                       [#78](https://github.com/agola-io/agola/pull/78)
- userdirectrun: allow setting destination branch/tag/ref (@sgotti)                          [#83](https://github.com/agola-io/agola/pull/83)
- tests: test also clone step (@sgotti)                                                      [#82](https://github.com/agola-io/agola/pull/82)
- docker driver: use fixed client api version (@sgotti)                                      [#81](https://github.com/agola-io/agola/pull/81)
- docker driver: use toolbox exec (@sgotti)                                                  [#80](https://github.com/agola-io/agola/pull/80)
- \*: export clients and related types (@sgotti)                                             [#77](https://github.com/agola-io/agola/pull/77)
- configstore: move configstore types inside configstore package (@sgotti)                   [#76](https://github.com/agola-io/agola/pull/76)
- util: remove time.go (@sgotti)                                                             [#75](https://github.com/agola-io/agola/pull/75)
- executor: set task endTime when marking as failed (@sgotti)                                [#71](https://github.com/agola-io/agola/pull/71)
- executor: fix typo in setting task endTime when setup failed (@sgotti)                     [#70](https://github.com/agola-io/agola/pull/70)
- runservice: fix/improve executor delete logic (@sgotti)                                    [#69](https://github.com/agola-io/agola/pull/69)
- runservice: maintenance/export/import (@sgotti)                                            [#68](https://github.com/agola-io/agola/pull/68)
- configstore: maintenance/export/import (@sgotti)                                           [#67](https://github.com/agola-io/agola/pull/67)
- util: use context in backoff (@sgotti)                                                     [#66](https://github.com/agola-io/agola/pull/66)
- readdb: close and open readdb on Run (@sgotti)                                             [#65](https://github.com/agola-io/agola/pull/65)
- \*: use sleep timer in loops (@sgotti)                                                     [#64](https://github.com/agola-io/agola/pull/64)
- db: use context functions (@sgotti)                                                        [#62](https://github.com/agola-io/agola/pull/62)
- datamanager: implement import/export (@sgotti)                                             [#63](https://github.com/agola-io/agola/pull/63)
- datamanager: implement maintenance mode (@sgotti)                                          [#61](https://github.com/agola-io/agola/pull/61)
- go mod: update golang.org/x/xerrors (@sgotti)                                              [#60](https://github.com/agola-io/agola/pull/60)
- db: retry on sqlite locked error (@sgotti)                                                 [#59](https://github.com/agola-io/agola/pull/59)
- readdb: fix deadlock in Run method (@sgotti)                                               [#58](https://github.com/agola-io/agola/pull/58)
- runservice: stop run also if result is not set (@sgotti)                                   [#57](https://github.com/agola-io/agola/pull/57)
